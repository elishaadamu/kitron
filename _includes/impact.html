<style>
.impact{
    background-image: url("/assets/images/bg/footer-bg.png");
    background-color: #1f1f40;
    background-repeat: no-repeat;
    object-fit: cover;
    background-position: left;
    padding: 50px 70px 50px 70px;
    margin-bottom: 50px;
}
.counter-section {
  display: flex;
  justify-content: space-around;
  flex-direction: row;
  margin: 50px 0;
  text-align: center;
}

.counter-item h3 {
  font-size: 1.5em;
  margin-bottom: 10px;
  color: white;
}

.counter {
  font-size: 2em;
  color: #6bc23c;
}
.impact-header{
    text-transform: uppercase;
    text-align: center;
    color: #6bc23c;
    font-size: x-large;
}
@media screen and (max-width: 1024px) {
.impact{
    background-image: url("/assets/images/bg/footer-bg.png");
    background-color: #1f1f40;
    background-repeat: no-repeat;
    object-fit: cover;
    background-position: left;
    padding: 50px 20px 50px 20px;
    margin-bottom: 50px;
}
.counter-section {
  display: flex;
  justify-content: space-around;
  flex-direction: column;
  margin: 50px 0;
  text-align: center;
  gap: 50px;
}
}
</style>


<div class="impact">
    <h3 class="impact-header">Kitron Green Initiative: Impact till Date</h3>

<div class="counter-section">
        <div class="counter-item">
          <h3>Countries Reached</h3>
          <div class="counter" data-target="6">0</div>
        </div>
        <div class="counter-item">
          <h3>Number of People Impacted</h3>
          <div class="counter" data-target="5200">0</div>
        </div>
        <div class="counter-item">
          <h3>People Reached in 2023</h3>
          <div class="counter" data-target="2300">0</div>
        </div>
</div>
      
</div>

  <script>
   const counters = document.querySelectorAll('.counter');
const speed = 200; // Adjust to control speed of counting

const animateCounters = () => {
  counters.forEach(counter => {
    const updateCount = () => {
      const target = +counter.getAttribute('data-target');
      const count = +counter.innerText;
      const increment = target / speed;

      if(count < target) {
        counter.innerText = formatNumber(Math.ceil(count + increment));
        setTimeout(updateCount, 25);
      } else {
        counter.innerText = formatNumber(target); // Format the final number
      }
    };
    updateCount();
  });
};

// Number formatting function to add "k" or "M"
const formatNumber = (num) => {
  if (num >= 1000000) {
    return (num / 1000000).toFixed(1) + 'M+'; // For millions
  } else if (num >= 1000) {
    return (num / 1000).toFixed(1) + 'k+'; // For thousands
  } else {
    return num; // For numbers less than 1000, return the number as-is
  }
};

// Use an IntersectionObserver to trigger counting only when the section is visible
const counterSection = document.querySelector('.counter-section');
const observer = new IntersectionObserver((entries) => {
  if (entries[0].isIntersecting) {
    animateCounters();
    observer.unobserve(counterSection); // Run only once when in view
  }
}, { threshold: 0.5 });

observer.observe(counterSection);



  </script>
  